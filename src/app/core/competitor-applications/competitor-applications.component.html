<mat-expansion-panel #formpanel>
  <mat-expansion-panel-header>
    <mat-panel-title>
      CREATE
    </mat-panel-title>
  </mat-expansion-panel-header>
  <form #form="ngForm" (ngSubmit)="createCompetitorApplication(form)">
    <mat-form-field>
      <mat-label>Date</mat-label>
      <input
        type="text"
        matInput
        [(ngModel)]="competitorApplicationForm.date"
        name="date"
        [matDatepicker]="pickerStartDate"
        placeholder="Choose a date"
        readonly
        (click)="pickerStartDate.open()"
      >
      <mat-datepicker-toggle matSuffix [for]="pickerStartDate"></mat-datepicker-toggle>
      <mat-datepicker #pickerStartDate disabled="false"></mat-datepicker>
    </mat-form-field>
    <mat-form-field (click)="selectClient($event)">
      <mat-label>Client</mat-label>
      <input
        type="text"
        name="clientId"
        [(ngModel)]="selectedClient.name + ' ' + selectedClient.surname"
        matInput
        required
      >
    </mat-form-field>
    <mat-form-field>
      <mat-label>Competitor</mat-label>
      <mat-select [(ngModel)]="competitorApplicationForm.competitorId" name="cityId" required>
        <mat-option *ngFor="let competitor of competitors" [value]="competitor.id">
          {{competitor.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Course</mat-label>
      <mat-select [(ngModel)]="competitorApplicationForm.courseId" name="courseId" required>
        <mat-option *ngFor="let course of courses" [value]="course.id">
          {{course.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <button mat-flat-button [disabled]="!form.valid">Create</button>
  </form>
</mat-expansion-panel>

<div class="overflow-x">
  <app-competitor-applications-table #competitorApplicationsTable></app-competitor-applications-table>
</div>
