<mat-expansion-panel #formpanel>
  <mat-expansion-panel-header>
    <mat-panel-title>
      CREATE
    </mat-panel-title>
  </mat-expansion-panel-header>
  <form #form="ngForm" (ngSubmit)="createApplication(form)">
    <mat-form-field>
      <mat-label>Date</mat-label>
      <input
        type="date"
        name="date"
        [(ngModel)]="applicationForm.date"
        matInput
        required
      >
    </mat-form-field>
    <mat-form-field (click)="selectClient($event)">
      <mat-label>Client</mat-label>
      <input
        type="text"
        name="clientId"
        [(ngModel)]="selectedClient.name + ' ' + selectedClient.surname"
        matInput
        required
      >
    </mat-form-field>
    <mat-form-field>
      <mat-label>Course</mat-label>
      <mat-select [(ngModel)]="applicationForm.courseId" name="courseId" required>
        <mat-option *ngFor="let course of courses" [value]="course.id">
          {{course.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Source</mat-label>
      <mat-select [(ngModel)]="applicationForm.sourceId" name="sourceId">
        <mat-option *ngFor="let source of sources" [value]="source.id">
          {{source.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Discount</mat-label>
      <input
        type="number"
        name="discount"
        [(ngModel)]="applicationForm.discount"
        matInput
        (input)="validateDiscount($event)"
      >
    </mat-form-field>
    <button mat-flat-button [disabled]="!form.valid">Create</button>
  </form>
</mat-expansion-panel>

<div class="overflow-x">
  <app-applications-table #applicationsTable ></app-applications-table>
</div>
